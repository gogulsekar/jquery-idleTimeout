!function(e){e.fn.idleTimeout=function(i){var t,o,n,l,s,a,r,d,g,u,c,m,v,T,f,p,L,y,b,w,h={redirectUrl:"/logout",idleTimeLimit:1200,idleCheckHeartbeat:2,customCallback:!1,activityEvents:"click keypress scroll wheel mousewheel mousemove",enableDialog:!0,dialogDisplayLimit:180,dialogTitle:"Session Expiration Warning",dialogText:"Because you have been inactive, your session is about to expire.",dialogTimeRemaining:"Time remaining",dialogStayLoggedInButton:"Stay Logged In",dialogLogOutNowButton:"Log Out Now",errorAlertMessage:'Please disable "Private Mode", or upgrade to a modern browser. Or perhaps a dependent file missing. Please see: https://github.com/marcuswestin/store.js',sessionKeepAliveTimer:600,sessionKeepAliveUrl:window.location.href},O=e.extend(h,i),A=document.title;return this.logout=function(){store.set("idleTimerLoggedOut",!0),store.set("userLoggedOut",!0)},o=function(){l=function(){e.get(O.sessionKeepAliveUrl),o()},s=setTimeout(l,1e3*O.sessionKeepAliveTimer)},n=function(){clearTimeout(s)},t=function(){e("body").on(O.activityEvents,function(){(!O.enableDialog||O.enableDialog&&L()!==!0)&&0==store.get("userLoggedOut")&&u()})},d=function(){var i=store.get("idleTimerLastActivity")+1e3*O.idleTimeLimit;e.now()>i?O.enableDialog?O.enableDialog&&L()!==!0&&(m(),f()):(w(),c()):store.get("idleTimerLoggedOut")===!0?(w(),c()):O.enableDialog&&L()===!0&&(y(),p())},u=function(){c(),store.set("idleTimerLastActivity",e.now()),g()},g=function(){d(),store.get("userLoggedOut")===!1&&store.get("idleTimerLoggedOut")===!1&&(a=setTimeout(g,1e3*O.idleCheckHeartbeat))},c=function(){clearTimeout(a)},m=function(){var i="<div id='idletimer_warning_dialog'><p>"+O.dialogText+"</p><p style='display:inline'>"+O.dialogTimeRemaining+": <div style='display:inline' id='countdownDisplay'></div></p></div>";e(i).dialog({buttons:[{text:O.dialogStayLoggedInButton,click:function(){y(),p(),u()}},{text:O.dialogLogOutNowButton,click:function(){w(),c()}}],closeOnEscape:!1,modal:!0,title:O.dialogTitle,open:function(){e(this).closest(".ui-dialog").find(".ui-dialog-titlebar-close").hide()}}),b(),document.title=O.dialogTitle,O.sessionKeepAliveTimer&&n()},T=function(){var i=store.get("idleTimerLastActivity")+1e3*O.idleTimeLimit+1e3*O.dialogDisplayLimit;(e.now()>i||store.get("idleTimerLoggedOut")===!0)&&w()},f=function(){v=setInterval(T,1e3*O.idleCheckHeartbeat)},p=function(){clearInterval(v),clearInterval(r)},L=function(){var i=e("#idletimer_warning_dialog").is(":visible");return i===!0?!0:!1},y=function(){e("#idletimer_warning_dialog").dialog("destroy").remove(),document.title=A,O.sessionKeepAliveTimer&&o()},b=function(){var i,t,o=O.dialogDisplayLimit;r=setInterval(function(){i=Math.floor(o/60),10>i&&(i="0"+i),t=o-60*i,10>t&&(t="0"+t),e("#countdownDisplay").html(i+":"+t),o-=1},1e3)},w=function(){store.set("idleTimerLoggedOut",!0),O.sessionKeepAliveTimer&&n(),O.customCallback&&O.customCallback(),O.redirectUrl&&(window.location.href=O.redirectUrl)},this.each(function(){store.enabled?(store.set("idleTimerLastActivity",e.now()),store.set("idleTimerLoggedOut",!1),store.set("userLoggedOut",!1),t(),O.sessionKeepAliveTimer&&o(),u()):alert(O.errorAlertMessage)})}}(jQuery);